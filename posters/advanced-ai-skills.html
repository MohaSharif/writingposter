<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8">
<title>Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø© Ù„ØµÙ†Ù‘Ø§Ø¹ Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ | Advanced AI Skills for Future Innovators</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="description" content="Ø®Ø±ÙŠØ·Ø© Ø·Ø±ÙŠÙ‚ Ù…ØªÙˆÙ‡Ø¬Ø© ØªÙˆØ¶Ø­ Ø§Ù„Ø¹Ù†Ø§Ù‚ÙŠØ¯ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø© Ù„Ù„Ù…Ù‡Ø§Ø±Ø§ØªØŒ Ù…Ø¹ ØªÙ†Ø¸ÙŠÙ… ÙˆØ§Ø¶Ø­ Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† Ø§Ù„Ø¹Ù†Ø§Ù‚ÙŠØ¯ ÙˆØ§Ù„Ù…Ù‡Ø§Ø±Ø§Øª Ø¯ÙˆÙ† ØªØ¯Ø§Ø®Ù„.">
<style>
:root{
  --bg:#1A093F;
  --path:#00FFB3;
  --planet:#A86EFF;
  --moon:#FFD44D;
  --text:#FFFFFF;
  --title:#FFD44D;
  --ratio-w:420; /* A2 Ø§ÙØªØ±Ø§Ø¶ÙŠ */
  --ratio-h:594;
}
*{box-sizing:border-box}
html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans Arabic","Tajawal","Cairo",Arial,sans-serif}
.wrap{min-height:100svh;display:flex;align-items:center;justify-content:center;padding:24px;
  background:
    radial-gradient(1200px 800px at 10% 90%, #2a1466 0%, transparent 60%),
    radial-gradient(1000px 700px at 90% 10%, #210d57 0%, transparent 55%),
    radial-gradient(800px 800px at 50% 50%, #14063b 0%, transparent 65%),
    repeating-linear-gradient(90deg, rgba(255,255,255,.05) 0 1px, transparent 1px 80px),
    repeating-linear-gradient(0deg, rgba(255,255,255,.04) 0 1px, transparent 1px 80px),
    var(--bg);
}
.poster{
  width:min(100%,1200px);
  aspect-ratio:var(--ratio-w)/var(--ratio-h);
  position:relative;border-radius:24px;overflow:hidden;
  box-shadow:0 0 0 1px rgba(255,255,255,.08), 0 20px 80px rgba(0,0,0,.5);
  background: radial-gradient(120% 120% at 50% 100%, rgba(168,110,255,.15), transparent 40%) var(--bg);
  isolation:isolate;
}
/* Ø§Ù„Ø¹Ù†ÙˆØ§Ù† */
.title{position:absolute;inset:24px 24px auto 24px;text-align:center;z-index:4;pointer-events:none;
  text-shadow:0 0 12px rgba(255,212,77,.35), 0 0 30px rgba(168,110,255,.2)}
.title h1{margin:0 0 6px;font-weight:800;letter-spacing:.3px;line-height:1.15;
  font-size: clamp(24px, 3.2vw, 42px);color:var(--title);
  filter: drop-shadow(0 0 10px rgba(255,212,77,.25))}
.title h2{margin:6px 0 8px;font-weight:700;font-size:clamp(14px,1.6vw,18px);opacity:.95}
.title p{margin:0;font-size:clamp(12px,1.4vw,16px);opacity:.9}

/* CTA */
.cta{position:absolute;inset:auto 0 0 0;z-index:4;
  background:linear-gradient(180deg, transparent, rgba(0,0,0,.35) 30%, rgba(0,0,0,.7));
  padding:16px 20px 18px;display:flex;gap:12px;justify-content:center;align-items:center;
  border-top:1px solid rgba(255,255,255,.08);backdrop-filter:blur(4px)}
.cta .chip{border:1px solid rgba(255,255,255,.15);border-radius:999px;padding:8px 14px;font-weight:700;
  background: radial-gradient(60% 180% at 50% 0%, rgba(255,212,77,.08), rgba(168,110,255,.08));
  text-shadow:0 0 8px rgba(255,212,77,.15)}

/* Ø§Ù„Ø±Ø³Ù… */
svg{position:absolute;inset:0;width:100%;height:100%;display:block;z-index:1}
.path{stroke:var(--path);stroke-width:8;fill:none;filter: drop-shadow(0 0 12px rgba(0,255,179,.55)) drop-shadow(0 0 30px rgba(0,255,179,.35));stroke-linecap:round}
.path-flow{stroke:var(--path);stroke-width:2.5;fill:none;opacity:.9;stroke-dasharray:14 10;animation:flow 5s linear infinite;filter: drop-shadow(0 0 6px rgba(0,255,179,.65))}
@keyframes flow{to{stroke-dashoffset:-500}}

.planet{filter: drop-shadow(0 0 18px rgba(168,110,255,.7)) drop-shadow(0 0 36px rgba(168,110,255,.4))}
.planet circle.core{fill:url(#planet-grad)}
.orbit{stroke: rgba(255,255,255,.12);stroke-width:1.25;fill:none}

.moon{fill:var(--moon);filter: drop-shadow(0 0 14px rgba(255,212,77,.6))}
.moon.pulse{animation:pulse 2.4s ease-in-out infinite;transform-origin:center}
@keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.08)}}

/* Ø¨Ø§Ø¯Ø¬ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¹Ù†Ù‚ÙˆØ¯ */
.badge text{font-weight:900;font-size:14px;fill:#0b0820}
.badge rect{fill:#FFD44D;stroke:#FFF2B3;stroke-width:1;rx:10;ry:10;filter: drop-shadow(0 0 12px rgba(255,212,77,.35))}

/* ØµÙ†Ø¯ÙˆÙ‚ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ù‡Ø§Ø±Ø© */
.skill-label{text-rendering:optimizeLegibility}
.skill-label rect.label-box{fill:rgba(0,0,0,.38);stroke:rgba(255,255,255,.22);stroke-width:1;rx:8;ry:8;backdrop-filter:blur(2px)}
.skill-label text{font-weight:800;font-size:12px;fill:#fff}
.skill-label .en{font-weight:700;opacity:.9}
.connector{stroke:rgba(255,255,255,.25);stroke-width:1.25}

.label-shadow{filter: drop-shadow(0 3px 10px rgba(0,0,0,.5))}

.stars g circle{fill:rgba(255,255,255,.9)}
.stars g circle.dim{opacity:.45}.stars g circle.tiny{r:.75}.stars g circle.mid{r:1.2}.stars g circle.big{r:1.8}

@media(max-width:800px){
  .skill-label text{font-size:11px}
  .badge text{font-size:13px}
}
</style>
</head>
<body>
<div class="wrap">
  <main class="poster" id="poster">
    <header class="title">
      <h1>Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø© Ù„ØµÙ†Ù‘Ø§Ø¹ Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„</h1>
      <h2>Advanced AI Skills for Future Innovators</h2>
      <p>Ø§Ø±ØªÙ‚Ù Ø¨Ù…Ù‡Ø§Ø±Ø§ØªÙƒ Ù…Ù† Ø§Ù„Ø£Ø³Ø§Ø³ Ø¥Ù„Ù‰ Ø§Ù„Ø§Ø­ØªØ±Ø§ÙØŒ ÙˆØ§Ø³ØªØ¹Ø¯ Ù„ØµÙ†Ø§Ø¹Ø© Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„.</p>
    </header>

    <svg viewBox="0 0 1200 1700" aria-label="Ø®Ø±ÙŠØ·Ø© Ø·Ø±ÙŠÙ‚ Ù…ØªÙˆÙ‡Ø¬Ø© Ø¨Ø£Ø±Ø¨Ø¹ Ù…Ø­Ø·Ø§Øª">
      <defs>
        <radialGradient id="planet-grad" cx="50%" cy="45%" r="65%">
          <stop offset="0%" stop-color="#E2D2FF"/><stop offset="35%" stop-color="#C5A9FF"/><stop offset="100%" stop-color="#A86EFF"/>
        </radialGradient>
        <filter id="soft" x="-20%" y="-20%" width="140%" height="140%"><feGaussianBlur stdDeviation="0.6"/></filter>
      </defs>

      <!-- Ù†Ø¬ÙˆÙ… Ø®ÙÙŠÙØ© -->
      <g class="stars" opacity=".65" filter="url(#soft)">
        <g>
          <circle class="tiny" cx="80" cy="140" r="1"/><circle class="mid" cx="220" cy="200" r="1.2"/>
          <circle class="dim big" cx="360" cy="90" r="1.8"/><circle class="tiny" cx="540" cy="180" r="1"/>
          <circle class="mid" cx="980" cy="130" r="1.2"/><circle class="tiny" cx="1100" cy="220" r="1"/>
          <circle class="mid" cx="1080" cy="480" r="1.2"/><circle class="tiny" cx="160" cy="540" r="1"/>
          <circle class="mid" cx="300" cy="820" r="1.2"/><circle class="big" cx="1020" cy="900" r="1.8"/>
          <circle class="tiny" cx="400" cy="1180" r="1"/><circle class="mid" cx="860" cy="1300" r="1.2"/>
          <circle class="tiny" cx="150" cy="1500" r="1"/><circle class="tiny" cx="1140" cy="1580" r="1"/>
        </g>
      </g>

      <!-- Ù…Ø³Ø§Ø± Ø§Ù„ØªØ¹Ù„Ù… -->
      <path id="learning-path"
            d="M 90 1580
               C 280 1420, 360 1220, 520 1040
               S 820 760, 940 560
               S 1040 320, 1120 160"
            class="path"/>
      <path d="M 90 1580
               C 280 1420, 360 1220, 520 1040
               S 820 760, 940 560
               S 1040 320, 1120 160"
            class="path-flow"/>

      <g id="clusters"></g>
    </svg>

    <footer class="cta"><span class="chip">ØªØ¹Ù„Ù‘Ù…ØŒ Ø§Ø¨ØªÙƒØ±ØŒ Ù‚Ø¯ Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ âœ¦ Learn, Innovate, Lead</span></footer>
  </main>
</div>

<script>
// ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ù†Ø³Ø¨Ø© Ø¹Ø¨Ø± Ø¨Ø§Ø±Ø§Ù…ÙŠØªØ± ?size=45 Ø£Ùˆ ?size=169
(function(){
  const p = new URLSearchParams(location.search);
  const size = p.get('size'), r = document.documentElement.style;
  if(size==='45'){ r.setProperty('--ratio-w','4'); r.setProperty('--ratio-h','5'); }
  else if(size==='169'){ r.setProperty('--ratio-w','16'); r.setProperty('--ratio-h','9'); }
})();

const clusters = [
  { t:.18, nameAr:"Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…", nameEn:"Advanced AI", emoji:"ğŸ¤–",
    skills:[
      {emoji:"ğŸ§©", ar:"Ù‡Ù†Ø¯Ø³Ø© Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ù…ØµØºÙ‘Ø±Ø©", en:"Model Customization"},
      {emoji:"ğŸ§ ", ar:"Ù…Ø­Ùˆ Ø§Ù„Ø£Ù…ÙŠØ© ÙÙŠ ØªØ¹Ù„Ù… Ø§Ù„Ø¢Ù„Ø©", en:"ML Literacy"},
      {emoji:"ğŸ”", ar:"Ø§Ù„ØªÙØ§Ø¹Ù„ Ø§Ù„Ø¹Ù…ÙŠÙ‚ Ù…Ø¹ Ø§Ù„Ù†Ù…Ø§Ø°Ø¬", en:"AI Query Mastery"},
      {emoji:"ğŸ–¼ï¸", ar:"Ø§Ù„Ø°ÙƒØ§Ø¡ Ù…ØªØ¹Ø¯Ø¯ Ø§Ù„ÙˆØ³Ø§Ø¦Ø·", en:"Multimodal AI"},
    ]},
  { t:.40, nameAr:"Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ÙŠØ© Ø§Ù„Ù†Ø§Ø´Ø¦Ø©", nameEn:"Next-Gen Skills", emoji:"ğŸš€",
    skills:[
      {emoji:"ğŸŒ", ar:"Ø§Ù„ØªÙˆØ£Ù… Ø§Ù„Ø±Ù‚Ù…ÙŠ", en:"Digital Twin Thinking"},
      {emoji:"âš¡", ar:"ØªÙÙƒÙŠØ± Ù…Ø¹Ø²Ù‘Ø² Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡", en:"AI-Augmented Thinking"},
      {emoji:"ğŸ› ï¸", ar:"Ø§Ù„Ù‡Ù†Ø¯Ø³Ø© Ø§Ù„Ø¹ÙƒØ³ÙŠØ© Ù„Ù„Ø°ÙƒØ§Ø¡", en:"AI Reverse Engineering"},
      {emoji:"ğŸ¨", ar:"Ø§Ù„Ø£ØªÙ…ØªØ© Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹ÙŠØ©", en:"Creative Automation"},
    ]},
  { t:.64, nameAr:"Ø§Ù„Ù‚ÙŠØ§Ø¯Ø© ÙˆØ§Ù„Ø§Ø¨ØªÙƒØ§Ø±", nameEn:"Leadership & Innovation", emoji:"ğŸŒŸ",
    skills:[
      {emoji:"ğŸ’¡", ar:"Ø§Ø¨ØªÙƒØ§Ø± Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ø¹Ø²Ø²Ø©", en:"AI-Powered Product Innovation"},
      {emoji:"ğŸ’¸", ar:"Ø§Ù„Ø§Ù‚ØªØµØ§Ø¯ Ø§Ù„ØªÙˆÙ„ÙŠØ¯ÙŠ", en:"Generative Economy"},
      {emoji:"ğŸ§­", ar:"Ø§Ù„Ù‚ÙŠØ§Ø¯Ø© Ø§Ù„Ø±Ù‚Ù…ÙŠØ©", en:"Digital Leadership"},
      {emoji:"ğŸ§©", ar:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙØ±Ù‚ Ø§Ù„Ù‡Ø¬ÙŠÙ†Ø©", en:"Hybrid Workforce Management"},
    ]},
  { t:.86, nameAr:"Ø§Ù„Ø­ÙˆÙƒÙ…Ø© ÙˆØ§Ù„Ø£Ø®Ù„Ø§Ù‚ÙŠØ§Øª", nameEn:"Ethics & Governance", emoji:"âš–ï¸",
    skills:[
      {emoji:"ğŸ›¡ï¸", ar:"Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø£Ø®Ù„Ø§Ù‚ÙŠ", en:"Ethical AI"},
      {emoji:"ğŸŒ", ar:"Ù…ÙˆØ§Ø·Ù†Ø© Ø±Ù‚Ù…ÙŠØ© Ù…Ø³Ø¤ÙˆÙ„Ø©", en:"Responsible Digital Citizenship"},
      {emoji:"ğŸŒ±", ar:"Ø§Ù„Ø§Ø³ØªØ¯Ø§Ù…Ø© Ø§Ù„Ø±Ù‚Ù…ÙŠØ©", en:"Digital Sustainability"},
      {emoji:"ğŸš¨", ar:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø§Ø·Ø± Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ÙŠØ©", en:"Future Risk Management"},
    ]},
];

const svg = document.querySelector('svg');
const path = document.getElementById('learning-path');
const host = document.getElementById('clusters');

function pointAt(t){
  const L = path.getTotalLength();
  const p = path.getPointAtLength(L*t);
  return {x:p.x, y:p.y};
}
function tangentAt(t){
  const L = path.getTotalLength();
  const eps = 2 / L;
  const p1 = path.getPointAtLength(L*Math.max(0,t-eps));
  const p2 = path.getPointAtLength(L*Math.min(1,t+eps));
  let dx = p2.x - p1.x, dy = p2.y - p1.y;
  const m = Math.hypot(dx,dy) || 1; dx/=m; dy/=m;
  return {x:dx, y:dy}; // Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ù…Ø³Ø§Ø±
}
function normalFrom(tan){ // Ø¹Ù…ÙˆØ¯ÙŠ Ù„Ù„Ø®Ø§Ø±Ø¬ (Ø§Ø®ØªÙŠØ§Ø±ÙŠØ§Ù‹ Ù†Ø¹ÙƒØ³ Ø­Ø³Ø¨ Ù…ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø³Ø§Ø±)
  return {x:-tan.y, y:tan.x};
}
function mk(tag){ return document.createElementNS(svg.namespaceURI, tag); }

const labelGroups=[]; // Ù„ØªØ¬Ù†Ù‘Ø¨ Ø§Ù„ØªØµØ§Ø¯Ù…

function addCluster(c){
  const pos = pointAt(c.t);
  const tan = tangentAt(c.t);
  const nrm = normalFrom(tan);

  const g = mk('g'); g.setAttribute('class','cluster');

  // Ø§Ù„ÙƒÙˆÙƒØ¨ + Ø§Ù„Ù…Ø¯Ø§Ø±
  const planetG = mk('g'); planetG.setAttribute('class','planet');
  const core = mk('circle'); core.setAttribute('class','core');
  core.setAttribute('cx',pos.x); core.setAttribute('cy',pos.y); core.setAttribute('r',44);
  const orbit = mk('circle'); orbit.setAttribute('class','orbit'); orbit.setAttribute('cx',pos.x); orbit.setAttribute('cy',pos.y); orbit.setAttribute('r',86);
  planetG.append(core, orbit);

  // Ø¨Ø§Ø¯Ø¬ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¹Ù†Ù‚ÙˆØ¯ (ÙŠÙˆØ¶Ø¹ ÙÙŠ Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ø¹Ù…ÙˆØ¯ÙŠ Ù„Ù„Ø®Ø§Ø±Ø¬)
  const badge = mk('g'); badge.setAttribute('class','badge label-shadow');
  const badgeText = mk('text'); badgeText.setAttribute('text-anchor','middle');
  badgeText.textContent = `${c.emoji}  ${c.nameAr} | ${c.nameEn}`;
  // Ù†Ø­Ø³Ø¨ Ù…ÙƒØ§Ù† Ø§Ù„Ø¨Ø§Ø¯Ø¬
  const bx = pos.x + nrm.x*130, by = pos.y + nrm.y*130;
  badgeText.setAttribute('x', bx); badgeText.setAttribute('y', by+4);
  // Ø¨Ø¹Ø¯ Ø¥Ø¯Ø±Ø§Ø¬ Ø§Ù„Ù†Øµ Ù†Ø­Ø³Ø¨ ØµÙ†Ø¯ÙˆÙ‚Ù‡
  // Ø³Ù†Ø¶ÙŠÙ Ù…Ø¤Ù‚ØªÙ‹Ø§ Ø«Ù… Ù†Ù‚ÙŠØ³
  badge.appendChild(badgeText);
  g.appendChild(planetG);
  g.appendChild(badge);
  host.appendChild(g);
  const bb = badgeText.getBBox();
  const padX=14, padY=8;
  const rect = mk('rect');
  rect.setAttribute('x', bb.x-padX);
  rect.setAttribute('y', bb.y-padY);
  rect.setAttribute('width', bb.width+padX*2);
  rect.setAttribute('height', bb.height+padY*2);
  badge.insertBefore(rect, badgeText);

  // ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª: Ø²ÙˆØ§ÙŠØ§ Ù†Ø³Ø¨ÙŠØ© Ø­ÙˆÙ„ Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ø¹Ù…ÙˆØ¯ÙŠ Ù„Ù„Ø®Ø§Ø±Ø¬
  // ÙŠØªÙ… ÙˆØ¶Ø¹ Ø§Ù„Ù‚Ù…Ø± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¯Ø§Ø±ØŒ ÙˆØ§Ù„Ù„ÙŠØ¨Ù„ Ø®Ø§Ø±Ø¬ Ø§Ù„Ù…Ø¯Ø§Ø± Ø¨Ù…Ø³Ø§ÙØ© Ø£ÙƒØ¨Ø±
  const baseAngle = Math.atan2(nrm.y, nrm.x);
  const offsetsDeg = [-40, -10, 20, 55]; // ØªØ¨Ø§Ø¹Ø¯ Ù…Ø­Ø³Ù‘Ù†
  const R = 86, labelR = 150; // Ù†ØµÙ Ù‚Ø·Ø± Ù„Ù„Ù‚Ù…Ø±ØŒ ÙˆØ¢Ø®Ø± Ù„Ù„ØµÙ†Ø¯ÙˆÙ‚

  c.skills.forEach((s,i)=>{
    const ang = baseAngle + offsetsDeg[i]*Math.PI/180;
    const mx = pos.x + R*Math.cos(ang);
    const my = pos.y + R*Math.sin(ang);

    // Ø§Ù„Ù‚Ù…Ø±
    const moon = mk('circle'); moon.setAttribute('class','moon pulse');
    moon.setAttribute('cx',mx); moon.setAttribute('cy',my); moon.setAttribute('r',12);
    g.appendChild(moon);

    // Ù†Ù‚Ø·Ø© ÙˆØ¬Ù‡Ø© Ø§Ù„Ù„ÙŠØ¨Ù„
    const lx = pos.x + labelR*Math.cos(ang);
    const ly = pos.y + labelR*Math.sin(ang);

    // Ø®Ø· Ø±Ø§Ø¨Ø·
    const line = mk('line'); line.setAttribute('class','connector');
    line.setAttribute('x1', mx); line.setAttribute('y1', my);
    line.setAttribute('x2', lx); line.setAttribute('y2', ly);
    g.appendChild(line);

    // Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„Ù„ÙŠØ¨Ù„ (ØµÙ†Ø¯ÙˆÙ‚ + Ù†Øµ Ø«Ù†Ø§Ø¦ÙŠ Ø§Ù„Ø£Ø³Ø·Ø±)
    const L = mk('g'); L.setAttribute('class','skill-label label-shadow');
    // Ù…Ø³ØªØ·ÙŠÙ„ Ø®Ù„ÙÙŠ ÙŠÙØ­Ø¯Ø¯ Ù„Ø§Ø­Ù‚Ù‹Ø§ Ø¨Ø¹Ø¯ Ù‚ÙŠØ§Ø³ Ø§Ù„Ù†Øµ
    const box = mk('rect'); box.setAttribute('class','label-box');
    const txt = mk('text');
    // Ø³Ø·Ø± Ø¹Ø±Ø¨ÙŠ
    const t1 = mk('tspan'); t1.setAttribute('x', 0); t1.setAttribute('dy', 0);
    t1.textContent = `${s.emoji}  ${s.ar}`;
    // Ø³Ø·Ø± Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ
    const t2 = mk('tspan'); t2.setAttribute('x', 0); t2.setAttribute('dy', 14);
    t2.setAttribute('class','en');
    t2.textContent = s.en;

    txt.appendChild(t1); txt.appendChild(t2);
    L.append(box, txt);
    host.appendChild(L);

    // Ù‚ÙŠØ§Ø³ Ø­Ø¬Ù… Ø§Ù„Ù†Øµ ÙˆØªÙˆØ³ÙŠØ· Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© Ø­ÙˆÙ„ (lx,ly)
    const tb = txt.getBBox(); const padX=10, padY=8;
    box.setAttribute('x', tb.x - padX); box.setAttribute('y', tb.y - padY);
    box.setAttribute('width', tb.width + padX*2); box.setAttribute('height', tb.height + padY*2);

    // Ù†Ø±ÙŠØ¯ Ù…Ø±ÙƒØ² Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© Ø¹Ù†Ø¯ (lx,ly) â‡’ Ù†Ù†Ù‚Ù„ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©
    const gb = L.getBBox();
    const gx = lx - (gb.x + gb.width/2);
    const gy = ly - (gb.y + gb.height/2);
    L.setAttribute('transform', `translate(${gx},${gy})`);

    // Ø®Ø²Ù‘Ù† Ù„Ù„Ù…ØµØ§Ø¯Ù…Ø©
    labelGroups.push({node:L, vx:0, vy:0});
  });
}

// Ø±Ø³Ù… ÙƒÙ„ Ø§Ù„Ø¹Ù†Ø§Ù‚ÙŠØ¯
clusters.forEach(addCluster);

// Ù…ØµØ§Ø¯Ù… Ø¨Ø³ÙŠØ· ÙŠØ¯ÙØ¹ Ø§Ù„ØµÙ†Ø§Ø¯ÙŠÙ‚ Ø¨Ø¹ÙŠØ¯Ù‹Ø§ Ù„Ùˆ ØªØ¯Ø§Ø®Ù„Øª
function resolveCollisions(iterations=80){
  const bbox = n => n.getBBox();
  for(let k=0;k<iterations;k++){
    let moved=false;
    for(let i=0;i<labelGroups.length;i++){
      for(let j=i+1;j<labelGroups.length;j++){
        const bi = bbox(labelGroups[i].node);
        const bj = bbox(labelGroups[j].node);
        // ØªØ­Ù‚Ù‘Ù‚ Ù…Ù† Ø§Ù„ØªØ¯Ø§Ø®Ù„
        if(!(bi.x+bi.width < bj.x || bj.x+bj.width < bi.x || bi.y+bi.height < bj.y || bj.y+bj.height < bi.y)){
          moved=true;
          // Ø§Ø²Ø§Ø­Ø© Ù„Ø·ÙŠÙØ© Ø¹Ù…ÙˆØ¯ÙŠØ© Ø£ÙƒØ«Ø± Ù…Ù† Ø£ÙÙ‚ÙŠØ© Ù„ØªÙ‚Ù„ÙŠÙ„ ØªØºÙŠÙ‘Ø± Ø§Ù„ØªØ±ØªÙŠØ¨
          const dx = (bi.x+bi.width/2) - (bj.x+bj.width/2);
          const dy = (bi.y+bi.height/2) - (bj.y+bj.height/2);
          const pushX = (dx>0? 6 : -6);
          const pushY = (dy>0? 10: -10);
          const gi = labelGroups[i].node, gj = labelGroups[j].node;

          const trI = gi.transform.baseVal.consolidate()?.matrix;
          const trJ = gj.transform.baseVal.consolidate()?.matrix;
          const txI = trI? trI.e : 0, tyI = trI? trI.f : 0;
          const txJ = trJ? trJ.e : 0, tyJ = trJ? trJ.f : 0;

          gi.setAttribute('transform', `translate(${txI+pushX},${tyI+pushY})`);
          gj.setAttribute('transform', `translate(${txJ-pushX},${tyJ-pushY})`);
        }
      }
    }
    if(!moved) break;
  }
}
resolveCollisions();

</script>
</body>
</html>
